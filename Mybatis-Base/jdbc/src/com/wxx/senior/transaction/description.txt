数据库事务

/*
 * 1.什么叫数据库事务？
 * 事务：一组逻辑操作单元,使数据从一种状态变换到另一种状态。
 * 		> 一组逻辑操作单元：一个或多个DML操作。
 *
 * 2.事务处理的原则：保证所有事务都作为一个工作单元来执行，即使出现了故障，都不能改变这种执行方式。
 * 当在一个事务中执行多个操作时，要么所有的事务都被提交(commit)，那么这些修改就永久地保存
 * 下来；要么数据库管理系统将放弃所作的所有修改，整个事务回滚(rollback)到最初状态。
 *
 * 3.数据一旦提交，就不可回滚
 *
 * 4.哪些操作会导致数据的自动提交？
 * 		> DDL(Create、Drop、Alter等)操作一旦执行，都会自动提交。
 * 			> set autocommit = false 对DDL操作失效
 * 		> DML(增删改)默认情况下，一旦执行，就会自动提交。
 * 			> 我们可以通过set autocommit = false的方式取消DML操作的自动提交。
 * 		>  默认在关闭连接时，会自动的提交数据
 */

- 对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题:
  - 脏读: 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还 没有被提交 的字段。之后, 若 T2 回滚, T1读取的内容就是临时且无效的。
  - 不可重复读: 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 更新 了该字段。之后, T1再次读取同一个字段, 值就不同了。
  - 幻读: 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中 插入 了一些新的行。之后, 如果 T1 再次读取同一个表, 就会多出几行。
- 数据库事务的隔离性: 数据库系统必须具有隔离并发运行各个事务的能力, 使它们不会相互影响, 避免各种并发问题。
- 一个事务与其他事务隔离的程度称为隔离级别。数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱。


- 数据库提供的4种事务隔离级别：READ UNCOMMITED、READ COMMITED、REPEATABLE READ、SERIALIZABLE。
- Oracle 支持的 2 种事务隔离级别：READ COMMITED, SERIALIZABLE。 Oracle 默认的事务隔离级别为: READ COMMITED。
- Mysql 支持 4 种事务隔离级别。Mysql 默认的事务隔离级别为: REPEATABLE READ。

 
